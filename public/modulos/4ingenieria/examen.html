<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulación: Ingeniería Social - NoHaxx</title>

  <link rel="stylesheet" href="../../CSS/base.css">
  <link rel="stylesheet" href="../../CSS/examenes.css">
  <link rel="stylesheet" href="../../CSS/modulos.css">

</head>
<body>
  <header>
      <div class="logo">NoHaxx</div>
      <div class="top-buttons">
      <a href="../../Pantallas/modulos.html" style="background-color: #eee; color: #333;">Volver a Módulos</a>
      </div>
  </header>

  <main class="main-content">
    
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="exam-step active" id="q1">
      <span class="tag">Pregunta 1/10</span>
      <h2>Vas a una pausa de 5 min en el trabajo.<br>
      ¿Qué opción de tu sistema deberías seleccionar?</h2>
      
      <div class="os-menu">
        <div class="os-header-bar">
          <div class="user-avatar-mini">YO</div>
          <div class="user-info-text">
            <strong>Usuario Corporativo</strong><br>
            Sesión iniciada: 08:30 AM
          </div>
        </div>
        <div class="os-grid">
          <button class="os-btn" onclick="checkSystem('monitor')">
            <div class="os-icon">⏻</div> Apagar Monitor
          </button>
          <button class="os-btn" onclick="checkSystem('lock')">
            <div class="os-icon">&#x1F512;</div> Bloquear Sesión
          </button>
          <button class="os-btn" onclick="checkSystem('minimize')">
            <div class="os-icon">_</div> Minimizar Todo
          </button>
          <button class="os-btn" onclick="checkSystem('away')">
            <div class="os-icon">●</div> Estado: Ausente
          </button>
        </div>
      </div>
    </div>

    <div class="exam-step" id="q2">
      <span class="tag">Pregunta 2/10</span>
      <h2>Vas a hacer una pausa para comer.<br>
        Selecciona que <strong>3 riesgos</strong> de seguridad no puedes dejar expuestos.</h2>
      
      <div class="interactive-desk" id="desk-q2">
        <div class="desk-item" data-type="safe" onclick="deskClick(this)">
          <div>Periodico</div>
        </div>
        <div class="desk-item" data-type="danger" onclick="deskClick(this)">
          <div>Claves de documentos</div>
        </div>
        <div class="desk-item" data-type="safe" onclick="deskClick(this)">
          <div>Foto de empresa</div>
        </div>
        <div class="desk-item" data-type="danger" onclick="deskClick(this)">
          <div>Móvil ON</div>
        </div>
        <div class="desk-item" data-type="safe" onclick="deskClick(this)">
          <div>Bolígrafo</div>
        </div>
        <div class="desk-item" data-type="danger" onclick="deskClick(this)">
          <div>Carpeta Confidencial</div>
        </div>
      </div>
    </div>

    <div class="exam-step" id="q3">
      <span class="tag">Pregunta 3/10</span>
      <p>Estas en la cafetería del trabajo y encuentras un USB.<br>
      El USB lleva una etiqueta que dice: "Dep_Contabilidad. Nominas"</p>
      <h2>¿Qué deberías hacer?</h2>
      <div class="usb-scene">
        <div class="usb-zone" onclick="usbAction('pc')">
          <div>Comprobar el contenido en mi PC para ver a quien pertenece y devolverlo.</div>
        </div>
        <div class="usb-stick">USB</div>
        <div class="usb-zone" onclick="usbAction('it')">
          <div>Llevarlo a soporte IT para que lo revise.</div>
        </div>
      </div>
    </div>

    <div class="exam-step" id="q4">
      <span class="tag">Pregunta 4/10</span>
      <h2>Haz clic en el elemento que alerta de posible peligro del correo.</h2>
      <div class="forensic-panel">
        <div class="forensic-header">
          <div><strong>De:</strong> <span class="hotspot-area" onclick="checkHotspot(4, 'sender')">soporte@micr0soft.com</span></div>
          <div style="margin-top:5px;"><strong>Asunto:</strong> <span class="hotspot-area" onclick="checkHotspot(4, 'subject')">Alerta de Seguridad</span></div>
        </div>
        <div class="forensic-body">
          <p>Su contraseña caduca hoy.</p>
          <p><span style="text-decoration:underline; color:blue;" class="hotspot-area" onclick="checkHotspot(4, 'link')">Renovar aquí</span></p>
        </div>
      </div>
    </div>

    <div class="exam-step" id="q5">
      <span class="tag">Pregunta 5/10</span>
      <p>El CEO te escribe un WhatsApp en el que te dice que es urgente que transfieras dinero para un proyecto a la cuenta que se acaba de crear para el mismo proposito.</p>
      <h2>¿A través de que medio verificarías esta información?</h2>
      <div class="mobile-screen-grid">
        <div class="app-icon" onclick="checkApp('whatsapp')">
          <div class="app-square" style="color:#25d366;">W</div>WhatsApp
        </div>
        <div class="app-icon" onclick="checkApp('phone')">
          <div class="app-square" style="color:#2196f3;">T</div>TELEFONO
        </div>
        <div class="app-icon" onclick="checkApp('teams')">
          <div class="app-square" style="color:#6264a7;">T</div>TEAMS
        </div>
        <div class="app-icon" onclick="checkApp('settings')">
          <div class="app-square" style="color:#999;">A</div>AJUSTES
        </div>
        <div class="app-icon" onclick="checkApp('mail')">
          <div class="app-img"></div>
          <div class="app-square" style="color:#d44638;">C</div>CORREO
        </div>
        <div class="app-icon" onclick="checkApp('bank')">
          <div class="app-square" style="color:#ffc107;">B</div>BANCO
        </div>
      </div>
    </div>

    <div class="exam-step" id="q6">
      <span class="tag">Pregunta 6/10</span>
      <p>Has observado las propiedades de los archivos para ver los tipo de archivo reales.</p>
      <h2>¿Qué tipo de archivo te resulta sospechoso?</h2>
      <div class="file-grid">
        <div class="file-card" onclick="checkFile('file1')">
          <div class="file-name">Info.pdf</div>
        </div>
        <div class="file-card" onclick="checkFile('file2')">
          <div class="file-name">Factura.pdf.exe</div>
        </div>
        <div class="file-card" onclick="checkFile('file3')">
          <div class="file-name">Logo.png</div>
        </div>
      </div>
    </div>

    <div class="exam-step" id="q7">
      <span class="tag">Pregunta 7/10</span>
      <p>Estas en la oficina y recibes por parte de alguien de Recursos Humanos un WhatsApp en el que te pide lo siguiente.</p>
      <h2>¿Qué haces?</h2>
      <div class="chat-container">
        <div class="chat-log" id="chat-log-q7">
          <div class="msg incoming"><strong>Laura (RRHH):</strong> Buenos días!</div>
          <div class="msg incoming"><strong>Laura (RRHH):</strong> Necesito el móvil del Director. Es urgente.</div>
          <div class="msg incoming"><strong>Laura (RRHH):</strong> Tenemos que avisarle de una reunión.</div>
        </div>
        <div class="chat-options" id="chat-opts-q7">
          <button class="chat-btn" onclick="replyChat('a')">A) Claro Laura, es 600...</button>
          <button class="chat-btn" onclick="replyChat('b')">B) No puedo dar datos por aquí, te lo mando por Teams.</button>
        </div>
      </div>
    </div>

    <div class="exam-step" id="q8">
      <span class="tag">Pregunta 8/10</span>
      <p>Estas esperando un paquete y no recuerdas bien que empresa de reparto te lo entregaba cuando justo recibes un mensaje.</p>
      <h2>Detecta el peligro en este SMS.</h2>
      <div class="forensic-panel" style="max-width:300px; margin:0 auto; border:2px solid #333;">
        <div class="forensic-header" style="background:#333; color:white;">Mensajes</div>
        <div class="forensic-body">
          <p class="hotspot-area" onclick="checkHotspot(8, 'text')"><strong>Correos:</strong> Su paquete está retenido.</p>
          <p>Pague las tasas en:</p>
          <p><span class="hotspot-area" style="color:blue; text-decoration:underline;" onclick="checkHotspot(8, 'link')">http://correos-pagos.net</span></p>
        </div>
      </div>
    </div>

    <div class="exam-step" id="q9">
      <span class="tag">Pregunta 9/10</span>
      <p>Vas a entrar en una reunión con clientes externos a la empresa y hoy estas sentada delante de una pizarra con datos confidenciales.</p>
      <h2>Protege tu entorno antes de entrar.</h2>
      
      <div class="webcam-wrapper">
        <div class="webcam-screen">
          <div id="room-bg" class="room-bg">
            <div class="whiteboard-risk">
              CONTRASEÑA<br>SERVIDOR:<br>Admin123
            </div>
          </div>
          <div class="user-face">YO</div>
        </div>
        
        <div class="webcam-controls">
          <div class="toggle-container">
            <span>DIFUMINAR FONDO:</span>
            <label class="switch">
              <input type="checkbox" id="blur-check" onchange="toggleBlur()">
              <span class="slider"></span>
            </label>
          </div>
          <button class="btn-join" onclick="attemptJoin()">ENTRAR</button>
        </div>
      </div>
    </div>

    <div class="exam-step" id="q10">
      <span class="tag">Pregunta 10/10</span>
      <p>Un compañero de trabajo te ha mandado un archivo de una extensión de Chrome para agilizar unas tareas del día a día. Al descargarlo te sale un aviso en el sistema.</p>
      <h2>¿Qué harías?</h2>
      <div class="system-overlay">
        <div class="popup-card">
          <div class="popup-header">⚠️ SEGURIDAD</div>
          <p>El archivo <strong>ExtensiónChrome.apk</strong> proviene de una fuente desconocida.</p>
          <div class="popup-buttons">
            <button class="btn-popup" onclick="checkPopup('block')">BLOQUEAR</button>
            <button class="btn-popup" onclick="checkPopup('install')">INSTALAR</button>
          </div>
        </div>
      </div>
    </div>

    <div class="exam-step" id="final-screen" style="text-align: center;">
      <h2>Resultados del test</h2>
      <div id="loading-results">Procesando respuestas...</div>
      
      <div id="results-content" style="display:none;">
        <div class="score-circle">
          <span id="final-score">0/10</span>
          <span class="score-label">Aciertos</span>
        </div>
        <h3 id="final-msg"></h3>
        <p id="final-detail"></p>
        <div id="firebase-msg"></div>
        
        <div style="margin-top:30px; display: flex; gap: 10px; justify-content: center;">
          <button onclick="location.reload()" class="boton" id="btn-retry" style="display:none; background:#f44336; border:none; color:white;">Repetir Test</button>
          <a href="../../Pantallas/modulos.html" class="boton" id="btn-continue" style="display:none;">Volver al Menú</a>
          <a href="../5contrasenas/teoria.html" class="boton" id="btn-next" style="display:none; background:#2e7d32; color:white;">SIGUIENTE MÓDULO ▶</a>
        </div>
      </div>
    </div>

  </main>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script src="../../scripts/firebase-config.js"></script>
  <script src="../../scripts/examen_ingenieria.js"></script>
  <script src="../../scripts/seguridad.js"></script>

</body>
</html>