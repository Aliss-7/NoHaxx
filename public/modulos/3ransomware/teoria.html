<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>M√≥dulo 3: Ransomware - NoHaxx</title>
  <link rel="stylesheet" href="../../style.css">
  <style>
    /* ESTILOS LM */
    body { background-color: #f4f4f4; }
    .lms-container { display: flex; max-width: 1200px; margin: 2rem auto; background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden; min-height: 650px; }
    
    .lms-sidebar { width: 25%; background-color: #f8f9fa; border-right: 1px solid #ddd; padding: 20px; }
    .lms-sidebar h3 { font-size: 1.1rem; border-bottom: 2px solid #0f1e40; padding-bottom: 10px; margin-bottom: 20px; }
    .lms-menu-item { padding: 12px 15px; margin-bottom: 8px; color: #555; border-radius: 5px; cursor: not-allowed; opacity: 0.6; transition: all 0.2s; }
    .lms-menu-item.unlocked { cursor: pointer; opacity: 1; }
    .lms-menu-item.active { background-color: #d32f2f; /* Rojo para Ransomware */ color: white; font-weight: bold; opacity: 1; }
    .lms-menu-item.completed::after { content: " ‚úì"; color: #28a745; font-weight: bold; }

    /* Contenido */
    .lms-content { width: 75%; padding: 40px; display: flex; flex-direction: column; position: relative; }
    .course-step { display: none; animation: fadeIn 0.5s; }
    .course-step.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .caso-card { background: #fff; border: 1px solid #ccc; padding: 15px; border-radius: 8px; cursor: pointer; transition: 0.3s; margin-bottom: 10px; }
    .caso-card:hover { border-color: #d32f2f; background: #fff5f5; }
    .caso-card.visto { border-left: 5px solid #d32f2f; background: #f9f9f9; opacity: 0.8; }
    .caso-card.visto::after { content: " Le√≠do üëÅÔ∏è"; float: right; font-size: 0.8rem; color: #666; }

    .simulacion-screen { background: #000; color: #0f0; padding: 20px; border-radius: 5px; font-family: monospace; margin: 15px 0; }
    .btn-risk { padding: 10px; margin: 5px; border: 1px solid #333; cursor: pointer; background: #eee; width: 100%; text-align: left; }
    .btn-risk:hover { background: #ddd; }
    
    .proteccion-item { display: flex; align-items: center; background: #e3f2fd; padding: 15px; margin: 10px 0; border-radius: 8px; cursor: pointer; }
    .proteccion-item input { margin-right: 15px; transform: scale(1.5); }
    .proteccion-item.checked { background-color: #c8e6c9; }

    .navigation-buttons { margin-top: auto; display: flex; justify-content: space-between; border-top: 1px solid #eee; padding-top: 20px; align-items: center; }
    .btn-nav { padding: 10px 25px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.3s; }
    .btn-prev { background: #e0e0e0; }
    .btn-next { background: #d32f2f; color: white; }
    .btn-next:disabled { background: #ccc; cursor: not-allowed; }
    .instruccion-bloqueo { color: #d32f2f; font-weight: bold; margin-right: 15px; display: none; }
    .btn-next:disabled + .instruccion-bloqueo { display: block; }
    .btn-finish { background: #28a745; color: white; padding: 10px 25px; text-decoration: none; border-radius: 5px; display: none; font-weight: bold; }
  </style>
</head>
<body>

  <header>
    <div class="logo">NoHaxx</div>
    <div class="top-buttons">
      <a href="../../modulos.html">Salir del M√≥dulo</a>
    </div>
  </header>

  <div class="lms-container">
    <aside class="lms-sidebar">
      <h3>üîí √çndice Ransomware</h3>
      <div class="lms-menu-item unlocked active" id="menu-0">1. ¬øQu√© es?</div>
      <div class="lms-menu-item" id="menu-1">2. Casos Famosos</div>
      <div class="lms-menu-item" id="menu-2">3. Riesgos (Simulaci√≥n)</div>
      <div class="lms-menu-item" id="menu-3">4. Protecci√≥n</div>
      <div class="lms-menu-item" id="menu-4">5. Conclusi√≥n</div>
    </aside>

    <main class="lms-content">

      <div class="course-step active">
        <h2>1. El Secuestro Digital</h2>
        <p>El <strong>Ransomware</strong> es un tipo de malware que "secuestra" tus datos cifr√°ndolos con una clave matem√°tica compleja. Una vez infectado, no puedes abrir tus archivos.</p> 
        
        <p>Los criminales exigen un rescate (ransom) econ√≥mico, generalmente en criptomonedas, a cambio de la clave de descifrado. Sin embargo, <strong>pagar nunca garantiza recuperar los datos</strong>.</p>
        <div style="background: #ffebee; border-left: 4px solid #d32f2f; padding: 15px;">
          <strong>‚ö†Ô∏è Impacto:</strong> Puede paralizar hospitales, ayuntamientos y empresas durante semanas.
        </div>
      </div>

      <div class="course-step">
        <h2>2. Historia del Caos</h2>
        <p>Para avanzar, haz clic y lee al menos <strong>2 casos reales</strong> que sacudieron el mundo:</p>
        
        <div class="caso-card" onclick="checkCase(this)">
          <h4>ü¶† WannaCry (2017)</h4>
          <p style="display:none; margin-top:10px; color:#555;">Afect√≥ a m√°s de 200,000 ordenadores en 150 pa√≠ses, incluyendo el sistema de salud brit√°nico y Telef√≥nica en Espa√±a. Explotaba una vulnerabilidad de Windows no actualizada.</p>
        </div>

        <div class="caso-card" onclick="checkCase(this)">
          <h4>üè≠ NotPetya (2017)</h4>
          <p style="display:none; margin-top:10px; color:#555;">Disfrazado de ransomware, su objetivo real era destruir datos. Caus√≥ p√©rdidas millonarias a la naviera Maersk y empresas farmac√©uticas.</p>
        </div>

        <div class="caso-card" onclick="checkCase(this)">
          <h4>üçñ JBS Foods (2021)</h4>
          <p style="display:none; margin-top:10px; color:#555;">La mayor procesadora de carne del mundo pag√≥ 11 millones de d√≥lares en rescate tras verse obligada a detener su producci√≥n en EE.UU. y Australia.</p>
        </div>
      </div>

      <div class="course-step">
        <h2>3. Comportamientos de Riesgo</h2>
        <p>¬øC√≥mo entra el ransomware? A menudo a trav√©s de macros en documentos Office o descargas.</p>
        <p><strong>SIMULACI√ìN:</strong> Te llega un correo con el adjunto <code>Factura_Pendiente.docm</code>. Al abrirlo, Word te pide: "Habilitar contenido (Macros)". ¬øQu√© haces?</p>
        
        <div class="simulacion-screen">
          <p>> DETECTADO ARCHIVO CON MACROS</p>
          <button class="btn-risk" onclick="riskAction(false)">A) Habilitar contenido para ver la factura.</button>
          <button class="btn-risk" onclick="riskAction(false)">B) Desactivar el antivirus moment√°neamente.</button>
          <button class="btn-risk" onclick="riskAction(true)">C) Cerrar el archivo y no habilitar nada.</button>
        </div>
        <p id="risk-feedback" style="font-weight:bold;"></p>
      </div>

      <div class="course-step">
        <h2>4. Escudo Defensivo</h2>
        <p>Selecciona las <strong>3 medidas fundamentales</strong> para protegerte contra el ransomware:</p>
        
        <div class="proteccion-item" onclick="toggleProtection(this)">
          <input type="checkbox" disabled>
          <span><strong>Backups (Copias de seguridad)</strong> desconectadas de la red (Regla 3-2-1).</span>
        </div>
        
        <div class="proteccion-item" onclick="toggleProtection(this)">
          <input type="checkbox" disabled>
          <span><strong>Actualizaciones</strong> del sistema operativo y parches de seguridad.</span>
        </div>

        <div class="proteccion-item" onclick="toggleProtection(this)">
          <input type="checkbox" disabled>
          <span><strong>Antivirus / EDR</strong> actualizado y activo en tiempo real.</span>
        </div>
      </div>

      <div class="course-step">
        <h2>5. Resumen</h2>
        <p>¬°Excelente! Ahora entiendes la gravedad del ransomware.</p>
        <ul>
          <li>üö´ El ransomware cifra archivos y pide dinero.</li>
          <li>üìâ Pagar no es una soluci√≥n fiable.</li>
          <li>üõ°Ô∏è Los backups offline son tu seguro de vida.</li>
        </ul>
        <p>Est√°s preparado para demostrar lo aprendido en el Examen Final.</p>
      </div>

      <div class="navigation-buttons">
        <button class="btn-nav btn-prev" id="prevBtn" onclick="changeStep(-1)">Anterior</button>
        <div style="display:flex; align-items:center;">
          <span id="bloqueo-msg" class="instruccion-bloqueo">‚ö†Ô∏è Completa la actividad</span>
          <button class="btn-nav btn-next" id="nextBtn" onclick="changeStep(1)">Siguiente ‚ûú</button>
        </div>
        <a href="examen.html" class="btn-finish" id="finishBtn">Ir al Examen Final</a>
      </div>

    </main>
  </div>

  <script>
    let currentStep = 0;
    const totalSteps = 5;
    let stepUnlocked = [true, false, false, false, true]; 

    // Contadores
    let casesRead = 0;
    let protectionChecked = 0;

    const steps = document.querySelectorAll('.course-step');
    const menuItems = document.querySelectorAll('.lms-menu-item');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const finishBtn = document.getElementById('finishBtn');
    const bloqueoMsg = document.getElementById('bloqueo-msg');

    function updateUI() {
      steps.forEach((step, index) => {
        step.classList.remove('active');
        menuItems[index].classList.remove('active');
        if (index < currentStep) menuItems[index].classList.add('completed');
        
        if (index <= currentStep || stepUnlocked[index-1]) {
           menuItems[index].classList.add('unlocked');
           menuItems[index].onclick = () => goToStep(index);
        } else {
           menuItems[index].onclick = null;
        }
      });

      steps[currentStep].classList.add('active');
      menuItems[currentStep].classList.add('active');

      prevBtn.style.visibility = (currentStep === 0) ? 'hidden' : 'visible';

      if (currentStep === totalSteps - 1) {
        nextBtn.style.display = 'none';
        finishBtn.style.display = 'inline-block';
        bloqueoMsg.style.display = 'none';
      } else {
        nextBtn.style.display = 'inline-block';
        finishBtn.style.display = 'none';
        
        if (stepUnlocked[currentStep]) {
            nextBtn.disabled = false;
            bloqueoMsg.style.display = 'none';
        } else {
            nextBtn.disabled = true;
            bloqueoMsg.style.display = 'block';
        }
      }
    }

    function changeStep(n) {
      if (n === 1 && !stepUnlocked[currentStep]) return;
      currentStep += n;
      if (currentStep >= totalSteps) currentStep = totalSteps - 1;
      if (currentStep < 0) currentStep = 0;
      updateUI();
    }

    function goToStep(n) {
      if (n > 0 && !stepUnlocked[n-1] && n > currentStep) return;
      currentStep = n;
      updateUI();
    }

    function unlockStep(index) {
      if (!stepUnlocked[index]) {
        stepUnlocked[index] = true;
        updateUI();
      }
    }

    function checkCase(element) {
      const p = element.querySelector('p');
      if (p.style.display === 'none') {
        p.style.display = 'block';
        if (!element.classList.contains('visto')) {
          element.classList.add('visto');
          casesRead++;
          if (casesRead >= 2) unlockStep(1);
        }
      }
    }

    function riskAction(isCorrect) {
      const feedback = document.getElementById('risk-feedback');
      if (isCorrect) {
        feedback.style.color = 'green';
        feedback.textContent = "‚úÖ ¬°Correcto! Las macros son una puerta de entrada com√∫n para el malware.";
        unlockStep(2);
      } else {
        feedback.style.color = 'red';
        feedback.textContent = "‚ùå Error: Habilitar macros de origen desconocido infectar√≠a el equipo.";
      }
    }

    function toggleProtection(element) {
      const checkbox = element.querySelector('input');
      if (!checkbox.checked) {
        checkbox.checked = true;
        element.classList.add('checked');
        protectionChecked++;
        if (protectionChecked >= 3) unlockStep(3); // Desbloquea paso 4
      }
    }

    updateUI();
  </script>
</body>
</html>