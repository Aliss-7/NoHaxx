<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>M√≥dulo 3: Ransomware - NoHaxx</title>
  <link rel="stylesheet" href="../../style.css">
</head>
<body>
  <header><div class="logo">NoHaxx</div><div class="top-buttons"><a href="../../modulos.html">Salir</a></div></header>
  <div class="lms-container">
    <aside class="lms-sidebar">
      <h3>üîí √çndice: Ransomware</h3>
      <div class="lms-menu-item unlocked active" id="menu-0">1. ¬øQu√© es?</div>
      <div class="lms-menu-item" id="menu-1">2. Casos Reales</div>
      <div class="lms-menu-item" id="menu-2">3. Simulaci√≥n</div>
      <div class="lms-menu-item" id="menu-3">4. Protecci√≥n</div>
      <div class="lms-menu-item" id="menu-4">5. Conclusi√≥n</div>
    </aside>
    <main class="lms-content">
      <div class="course-step active">
        <h2>1. El Secuestro Digital</h2>
        <p>El ransomware cifra tus archivos y pide un rescate. Pagar nunca garantiza recuperarlos.</p>
      </div>
      <div class="course-step">
        <h2>2. Casos Famosos</h2>
        <p>Lee 2 casos:</p>
        <div class="caso-card" onclick="checkCase(this)"><h4>WannaCry (2017)</h4><p style="display:none">Afect√≥ a 150 pa√≠ses.</p></div>
        <div class="caso-card" onclick="checkCase(this)"><h4>NotPetya (2017)</h4><p style="display:none">Destrucci√≥n de datos masiva.</p></div>
        <div class="caso-card" onclick="checkCase(this)"><h4>JBS Foods (2021)</h4><p style="display:none">Paraliz√≥ la producci√≥n de carne.</p></div>
      </div>
      <div class="course-step">
        <h2>3. Comportamientos de Riesgo</h2>
        <p>Simulaci√≥n: Archivo <code>Factura.docm</code> pide habilitar macros.</p>
        <div class="simulacion-screen">
          <button class="btn-risk" onclick="riskAction(false)">A) Habilitar</button>
          <button class="btn-risk" onclick="riskAction(true)">B) Cerrar (Correcto)</button>
        </div>
        <p id="risk-feedback"></p>
      </div>
      <div class="course-step">
        <h2>4. Escudo Defensivo</h2>
        <p>Marca las 3 claves:</p>
        <div class="proteccion-item" onclick="toggleProt(this)"><input type="checkbox" disabled> Backups Offline</div>
        <div class="proteccion-item" onclick="toggleProt(this)"><input type="checkbox" disabled> Actualizaciones</div>
        <div class="proteccion-item" onclick="toggleProt(this)"><input type="checkbox" disabled> Antivirus</div>
      </div>
      <div class="course-step">
        <h2>5. Resumen</h2>
        <p>Recuerda: Backups, actualizaciones y desconfianza.</p>
        <div class="video-box">
          <h4>üì∫ V√≠deo Recomendado (1 min)</h4>
          <div class="video-responsive"></div>
          <a href="https://www.youtube.com/watch?v=sd7Ns_ziBPY" title="_blank">¬øQu√© es un ransomware?allowfullscreen></iframe>
        </div>
      </div>
      <div class="navigation-buttons">
        <button class="btn-nav btn-prev" id="prevBtn" onclick="changeStep(-1)">Anterior</button>
        <div style="display:flex; align-items:center;">
          <span id="bloqueo-msg" class="instruccion-bloqueo">‚ö†Ô∏è Completa la tarea</span>
          <button class="btn-nav btn-next" id="nextBtn" onclick="changeStep(1)">Siguiente ‚ûú</button>
        </div>
        <a href="examen.html" class="btn-finish" id="finishBtn">Ir al Examen</a>
      </div>
    </main>
  </div>
  <script>
    let currentStep=0; const totalSteps=5; let stepUnlocked=[true,false,false,false,true]; let casesRead=0, protChecked=0;
    const steps=document.querySelectorAll('.course-step'), menus=document.querySelectorAll('.lms-menu-item'), prev=document.getElementById('prevBtn'), next=document.getElementById('nextBtn'), finish=document.getElementById('finishBtn'), msg=document.getElementById('bloqueo-msg');
    function updateUI(){
      steps.forEach((s,i)=>{s.classList.remove('active'); menus[i].classList.remove('active'); if(i<currentStep)menus[i].classList.add('completed'); if(i<=currentStep||stepUnlocked[i-1]){menus[i].classList.add('unlocked'); menus[i].onclick=()=>goStep(i);}else{menus[i].onclick=null;}});
      steps[currentStep].classList.add('active'); menus[currentStep].classList.add('active');
      prev.style.visibility=(currentStep===0)?'hidden':'visible';
      if(currentStep===totalSteps-1){next.style.display='none'; finish.style.display='inline-block'; msg.style.display='none';}else{next.style.display='inline-block'; finish.style.display='none'; if(stepUnlocked[currentStep]){next.disabled=false; msg.style.display='none';}else{next.disabled=true; msg.style.display='block';}}
    }
    function changeStep(n){if(n===1&&!stepUnlocked[currentStep])return; currentStep+=n; updateUI();}
    function goStep(n){if(n>0&&!stepUnlocked[n-1]&&n>currentStep)return; currentStep=n; updateUI();}
    function unlockStep(i){if(!stepUnlocked[i]){stepUnlocked[i]=true; updateUI();}}
    function checkCase(el){const p=el.querySelector('p'); if(p.style.display==='none'){p.style.display='block'; if(!el.classList.contains('visto')){el.classList.add('visto'); casesRead++; if(casesRead>=2)unlockStep(1);}}}
    function riskAction(ok){const fb=document.getElementById('risk-feedback'); if(ok){fb.style.color='green'; fb.innerText='‚úÖ Correcto.'; unlockStep(2);}else{fb.style.color='red'; fb.innerText='‚ùå Error. Macros = Peligro.';}}
    function toggleProt(el){const ch=el.querySelector('input'); if(!ch.checked){ch.checked=true; el.classList.add('checked'); protChecked++; if(protChecked>=3)unlockStep(3);}}
    updateUI();
  </script>
</body>
</html>